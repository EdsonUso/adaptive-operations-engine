- name: RestartWebService
  preconditions:
    service_web_healthy: false
    port_9090_in_use: false # Re-adicionada para forçar o diagnóstico
  effects:
    service_web_healthy: true
  cost: 5
  executor:
    type: "http"
    method: "POST"
    url: "http://service-manager:8081/actions/restart-container"
    body: '{ "containerName": "aoe-target-app" }'

- name: KillProcessBlockingPort
  preconditions:
    port_9090_in_use: true
  effects:
    port_9090_in_use: false
  cost: 8
  executor:
    type: "http"
    method: "POST"
    url: "http://service-manager:8081/actions/kill-process-on-port"
    body: '{ "port": 9090 }'

- name: DiagnosePortUsage
  preconditions: {} # Sem pré-condições, pode ser sempre usada para descobrir fatos
  cost: 1 # Custo baixo para ser uma opção atrativa quando faltam fatos
  executor:
    type: "http"
    method: "POST"
    url: "http://service-manager:8081/diagnostics/check-port"
    body: '{ "port": 9090 }'
